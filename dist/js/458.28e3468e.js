"use strict";(self["webpackChunkjianyi"]=self["webpackChunkjianyi"]||[]).push([[458],{6342:function(s,t,a){a.d(t,{Md:function(){return n},UO:function(){return r},qd:function(){return o},sC:function(){return e}});var i=a(4040);function e(){return(0,i.Z)({url:"page/discovery",method:"get"})}function r(){return(0,i.Z)({url:"search/recommend_kws",method:"get"})}function n(s){return(0,i.Z)({url:"search",method:"get",params:s})}function o(s){return(0,i.Z)({url:"articles",method:"get",params:s})}},7278:function(s,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"searchMsg"},[t("van-sticky",[t("div",{staticClass:"searchtop"},[t("div",{staticClass:"searchNav"},[t("span",{staticClass:"iconfont icon-sousuoxiao"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"太爱了!新恒结衣夏日清新广告"},domProps:{value:s.keywords},on:{keyup:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.search.apply(null,arguments)},input:function(t){t.target.composing||(s.keywords=t.target.value)}}}),t("span",{directives:[{name:"show",rawName:"v-show",value:s.keywords,expression:"keywords"}],staticClass:"iconfont icon-guanbi2fill",on:{click:s.quxiaoClick}})]),t("router-link",{staticClass:"quxiao",attrs:{tag:"div",to:"/searchview"}},[s._v("取消")])],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:s.isSearch,expression:"isSearch"}],staticClass:"noSearch"},[t("div",{staticClass:"history"},[s.historyList?t("div",{staticClass:"title"},[t("h3",[s._v("历史记录")]),t("span",{staticClass:"iconfont icon-lajitong",on:{click:s.delHistroyList}})]):s._e(),t("ul",s._l(s.historyList,(function(a,i){return t("li",{key:i,on:{click:function(t){return s.kwSearch(a)}}},[s._v(" "+s._s(a)+" ")])})),0)]),t("div",{staticClass:"hotSearch"},[t("h3",[s._v("热门搜索")]),t("ul",s._l(s.recommendkws,(function(a){return t("li",{key:a.id,on:{click:function(t){return s.kwSearch(a.name)}}},[s._v(" "+s._s(a.name)+" ")])})),0)])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!s.isSearch,expression:"!isSearch"}],staticClass:"yesSearch"},[t("van-sticky",{attrs:{"offset-top":55}},[t("div",{staticClass:"typeTile"},[t("div",[t("span",{class:{active:1==s.searchType},on:{click:function(t){s.searchType=1}}},[s._v("作品")])]),t("div",[t("span",{class:{active:2==s.searchType},on:{click:function(t){s.searchType=2}}},[s._v("创作人")])])])]),s.worksData?t("div",[s.worksData?t("div",{directives:[{name:"show",rawName:"v-show",value:1==s.searchType,expression:"searchType == 1"}],staticClass:"works"},[t("van-sticky",{attrs:{"offset-top":93}},[t("div",{staticClass:"msgtop"},[t("div",{on:{click:function(t){s.menuDispaly=!s.menuDispaly}}},[s._v(" "+s._s(s.type[s.typeIndex])+" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!s.menuDispaly,expression:"!menuDispaly"}],staticClass:"iconfont icon-xiangxiazhankai"}),t("span",{directives:[{name:"show",rawName:"v-show",value:s.menuDispaly,expression:"menuDispaly"}],staticClass:"iconfont icon-shouqi"})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:s.menuDispaly,expression:"menuDispaly"}],staticClass:"dropdownMenu"},s._l(s.type,(function(a,i){return t("p",{key:i,on:{click:function(t){return s.typeChange(i)}}},[s._v(" "+s._s(a)+" ")])})),0)]),t("div",{staticClass:"worksRuslt"},[t("p",{staticClass:"countinfo"},[s._v(" 共 "),t("span",[s._v(s._s(s.worksData.total))]),s._v(" 部作品 ")]),s._l(s.worksData.list,(function(a){return t("router-link",{key:a.id,staticClass:"videoInfo",attrs:{tag:"div",to:"/videoplay?id="+a.id}},[t("div",{staticClass:"Bigimg"},[t("img",{attrs:{src:a.cover,alt:""}})]),t("div",{staticClass:"detailInfo"},[t("h4",[s._v(s._s(a.title))]),t("div",{staticClass:"count"},[s._v(" 播放 "+s._s(a.count.count_view)+" · 喜欢 "+s._s(a.count.count_like)+" ")]),a.team[0]?t("div",{staticClass:"allAuthor"},[t("div",{staticClass:"pics"},[t("div",{staticClass:"img img1"},[t("img",{attrs:{src:a.team[0].userinfo.avatar,alt:""}})]),a.team[1]?t("div",{staticClass:"img img2"},[t("img",{attrs:{src:a.team[1].userinfo.avatar,alt:""}})]):s._e(),a.team[2]?t("div",{staticClass:"img img3"},[t("img",{attrs:{src:a.team[2].userinfo.avatar,alt:""}})]):s._e()]),t("div",{staticClass:"all"},[t("span",{staticClass:"firstname"},[s._v(s._s(a.team[0].userinfo.username))]),t("span",[s._v("等"+s._s(a.team_user_count)+"位创作人")])])]):t("div",{staticClass:"allAuthor"},[t("div",{staticClass:"pic"},[t("div",{staticClass:"img img1"},[t("img",{attrs:{src:a.author.userinfo.avatar,alt:""}})])]),t("div",{staticClass:"all"},[s._v(s._s(a.author.userinfo.username))])])])])}))],2)],1):s._e(),s.creatorData?t("div",{directives:[{name:"show",rawName:"v-show",value:2==s.searchType,expression:"searchType == 2"}],staticClass:"author"},[t("p",{staticClass:"countinfo"},[s._v(" 共 "),t("span",[s._v(s._s(s.creatorData.total))]),s._v(" 位创作人 ")]),t("div",{staticClass:"authorRuslt"},s._l(s.creatorData.list,(function(a){return t("router-link",{key:a.id,staticClass:"infoBox",attrs:{tag:"div",to:"/userinfo?id="+a.id}},[t("div",{staticClass:"authorInfo"},[t("div",{staticClass:"img"},[t("img",{attrs:{src:a.avatar,alt:""}})]),t("div",{staticClass:"text"},[t("p",{staticClass:"nickname"},[s._v(s._s(a.username))]),t("p",{staticClass:"p2"},[s._v(" "+s._s(a.occupation)+" · 粉丝 "+s._s(a.count.count_follower)+" ")])])]),t("div",{staticClass:"follow"},[s._v("关注")])])})),1)]):s._e()]):t("div",{staticClass:"loadingView"},[t("div",{staticClass:"loading"}),t("van-loading",{attrs:{type:"spinner",size:"20",vertical:""}})],1)],1)],1)},e=[],r=a(6342),n={data(){return{recommendkws:null,keywords:"",isSearch:!0,menuDispaly:!1,worksData:null,type:["最热门","最匹配","新发布"],typeIndex:0,creatorData:null,searchType:1,historyList:null}},methods:{getRecommendKwsFun(){(0,r.UO)().then((s=>{this.recommendkws=s.data.list}))},getSearchInfoFun(s){(0,r.Md)({kw:s}).then((s=>{this.worksData=s.data})),(0,r.Md)({kw:s,type:"creator"}).then((s=>{this.creatorData=s.data}))},typeChange(s){let t;this.typeIndex=s,this.menuDispaly=!1,0==s?t="defalut":1==s?t="addtime":2==s&&(t="hot"),this.$set(this,"worksData",null),(0,r.Md)({kw:this.keywords,sort:t}).then((s=>{this.worksData=s.data}))},search(){if(""==this.keywords)return;let s=[],t=window.localStorage.getItem("historyList");if(t){s=JSON.parse(t);let a=s.findIndex((s=>s==this.keywords));-1==a||s.splice(a,1),s.unshift(this.keywords)}else s.push(this.keywords);this.$set(this,"historyList",s),s=JSON.stringify(s),window.localStorage.setItem("historyList",s),this.isSearch=!1,this.getSearchInfoFun(this.keywords)},kwSearch(s){this.keywords=s,this.search()},quxiaoClick(){this.keywords="",this.isSearch=!0},delHistroyList(){window.localStorage.removeItem("historyList"),this.$set(this,"historyList",null)}},created(){this.historyList=JSON.parse(window.localStorage.getItem("historyList")),this.getRecommendKwsFun()}},o=n,c=a(2349),l=(0,c.Z)(o,i,e,!1,null,null,null),u=l.exports}}]);
//# sourceMappingURL=458.28e3468e.js.map