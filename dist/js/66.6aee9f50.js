"use strict"; (self["webpackChunkjianyi"] = self["webpackChunkjianyi"] || []).push([[66], { 3119: function (t, s, e) { e.d(s, { HF: function () { return a }, dX: function () { return r }, eV: function () { return c }, qE: function () { return o }, wR: function () { return n } }); var i = e(4040); function a(t) { return (0, i.Z)({ url: "user/" + t, method: "get" }) } function n(t, s) { return (0, i.Z)({ url: "user/" + t + "/articles", method: "get", params: s }) } function o(t, s) { return (0, i.Z)({ url: "user/" + t + "/articles-approved", method: "get", params: s }) } function r(t, s) { return (0, i.Z)({ url: "user/" + t + "/followers", method: "get", params: s }) } function c(t, s) { return (0, i.Z)({ url: "user/" + t + "/followees", method: "get", params: s }) } }, 66: function (t, s, e) { e.r(s), e.d(s, { default: function () { return u } }); var i = function () { var t = this, s = t._self._c; return s("div", [t.userInfo ? s("div", { staticClass: "searchMsg" }, [s("div", { staticClass: "top", style: { "background-image": "url(" + t.userInfo.app_background != "" ? t.userInfo.app_background : "../assets/img/Db.png)" } }, [s("div", { staticClass: "mask" }, [s("van-sticky", { on: { scroll: t.stickyBgChange } }, [s("div", { ref: "topNav", staticClass: "icons" }, [s("span", { staticClass: "iconfont icon-xiangzuojiantou", on: { click: t.goPrev } }), s("p", { directives: [{ name: "show", rawName: "v-show", value: t.scrollChange, expression: "scrollChange" }], staticClass: "nickname" }, [t._v(" " + t._s(t.userInfo.username) + " ")]), s("span", { staticClass: "iconfont icon-gengduo1", on: { click: function (s) { t.showShare = !0 } } })])]), s("div", { staticClass: "avatar" }, [s("img", { attrs: { src: t.userInfo.avatar, alt: "" } })]), s("h2", [t._v(t._s(t.userInfo.username))]), s("p", { staticClass: "p1" }, [t._v(" " + t._s(t.userInfo.occupation) + " " + t._s(t.userInfo.ip_location) + " ")]), s("p", { staticClass: "p2" }, [t._v(t._s(t.userInfo.verify_description))]), s("div", { staticClass: "topEnd" }, [s("div", { staticClass: "count" }, [s("div", { staticClass: "popularity" }, [s("p", { staticClass: "countP1" }, [t._v(" " + t._s(t._f("CountHandle")(t.userInfo.count.count_popularity)) + " ")]), s("p", { staticClass: "countP2" }, [t._v("人气")])]), s("router-link", { staticClass: "fans", attrs: { tag: "div", to: "/followview?id=" + t.userInfo.id + "&type=followers" } }, [s("p", { staticClass: "countP1" }, [t._v(" " + t._s(t._f("CountHandle")(t.userInfo.count.count_follower)) + " ")]), s("p", { staticClass: "countP2" }, [t._v("粉丝")])]), s("router-link", { staticClass: "follow", attrs: { tag: "div", to: "/followview?id=" + t.userInfo.id + "&type=followees" } }, [s("p", { staticClass: "countP1" }, [t._v(" " + t._s(t._f("CountHandle")(t.userInfo.count.count_followee)) + " ")]), s("p", { staticClass: "countP2" }, [t._v("关注")])])], 1), s("div", { staticClass: "btn" }, [t._v("关注")])])], 1)]), s("div", { staticClass: "nav" }, [s("div", { class: { active: 0 == t.navIndex }, on: { click: function (s) { t.navIndex = 0 } } }, [t._v("作品")]), s("div", { class: { active: 1 == t.navIndex }, on: { click: function (s) { t.navIndex = 1 } } }, [t._v("专辑")]), s("div", { class: { active: 2 == t.navIndex }, on: { click: t.getUserLikeFun } }, [t._v(" 喜欢 ")]), s("div", { class: { active: 3 == t.navIndex }, on: { click: function (s) { t.navIndex = 3 } } }, [t._v("资料")])]), s("div", { directives: [{ name: "show", rawName: "v-show", value: 0 == t.navIndex, expression: "navIndex == 0" }], staticClass: "works" }, [s("div", { staticClass: "paixu", on: { click: t.showMenu } }, [t._v(" " + t._s(t.articlesOrder[t.orderIndex]) + " "), s("span", { staticClass: "iconfont icon-xiangxiazhankai" }), s("div", { directives: [{ name: "show", rawName: "v-show", value: t.menuShow, expression: "menuShow" }], staticClass: "dropdownMenu" }, t._l(t.articlesOrder, (function (e, i) { return s("p", { key: i, class: { active: i == t.orderIndex }, on: { click: function (s) { return t.orderChange(i) } } }, [t._v(" " + t._s(e) + " ")]) })), 0)]), t.articlesList ? s("ul", { staticClass: "worksInfo" }, [s("van-list", { attrs: { finished: t.finished, "finished-text": "没有更多了" }, on: { load: t.onLoad }, model: { value: t.loading, callback: function (s) { t.loading = s }, expression: "loading" } }, t._l(t.articlesList, (function (e) { return s("router-link", { key: e.resource.id, attrs: { tag: "li", to: "/videoplay?id=" + e.resource.id } }, [s("div", { staticClass: "img" }, [s("img", { attrs: { src: e.resource.cover, alt: "" } }), s("div", { staticClass: "time" }, [t._v(" " + t._s(t._f("playerTime")(e.resource.duration)) + " ")])]), s("div", { staticClass: "text" }, [s("h3", [t._v(t._s(e.resource.title))]), s("p", { staticClass: "times" }, [t._v(" " + t._s(t._f("changeTimeFormat")(1e3 * e.resource.publish_time)) + " ")]), s("div", { staticClass: "textBottom" }, [s("p", [t._v(" " + t._s(t._f("CountHandle")(e.resource.count.count_like)) + " 喜欢 · " + t._s(t._f("CountHandle")(e.resource.count.count_view)) + " 播放 ")]), s("span", { staticClass: "iconfont icon-gengduo1", on: { click: function (s) { s.preventDefault(), t.showShare = !0 } } })])])]) })), 1)], 1) : t._e()]), s("div", { directives: [{ name: "show", rawName: "v-show", value: 1 == t.navIndex, expression: "navIndex == 1" }], staticClass: "album" }, [s("div", { staticClass: "albumInfo" }, [t._v("专辑功能暂未开放~")])]), t.likeList ? s("div", { directives: [{ name: "show", rawName: "v-show", value: 2 == t.navIndex, expression: "navIndex == 2" }], staticClass: "like" }, [s("div", { staticClass: "topMargin" }), 0 != t.likeList.length ? s("div", t._l(t.likeList, (function (i) { return s("router-link", { key: i.resource.id, staticClass: "likeInfo", attrs: { tag: "div", to: "videoplay?id=" + i.resource.id } }, [s("div", { staticClass: "top" }, [s("div", { staticClass: "userInfo" }, [s("div", { staticClass: "img" }, [s("img", { attrs: { src: i.resource.author.userinfo.avatar, alt: "" } })]), s("p", [t._v(" " + t._s(i.resource.author.userinfo.username) + " ")])]), s("span", { staticClass: "iconfont icon-gengduo1", on: { click: function (s) { s.preventDefault(), t.showShare = !0 } } })]), s("p", { staticClass: "text" }, [t._v(t._s(i.resource.title))]), t.videoLoading ? s("div", { staticClass: "img" }, [s("img", { attrs: { src: i.resource.cover, alt: "" } }), s("div", { staticClass: "imgBottom" }, [s("p", [t._v(" " + t._s(t._f("CountHandle")(i.resource.count.count_view)) + " 观看 | " + t._s(t._f("playerTime")(i.resource.duration)) + " ")])])]) : s("div", { staticClass: "video" }, [s("video", { ref: "video", refInFor: !0, attrs: { src: e(3637), muted: "" }, domProps: { muted: !0 }, on: { canplay: t.oncanplayFun, timeupdate: t.ontimeupdateFun } }), s("div", { staticClass: "process" }, [s("div", { staticClass: "line", style: { width: t.lineWidth } })]), s("div", { staticClass: "iconfont icon-shengyinguan" }), s("div", { staticClass: "iconfont icon-shengyinkai icondisplay" })]), s("div", { staticClass: "bottom" }, [s("div", { staticClass: "shoucang" }, [s("span", { staticClass: "iconfont icon-shoucang" }), t._v(" " + t._s(i.resource.count.count_collect) + " ")]), s("div", { staticClass: "pinglun" }, [s("span", { staticClass: "iconfont icon-pinglun1" }), t._v(" " + t._s(i.resource.count.count_comment) + " ")]), s("div", { staticClass: "dianzan" }, [s("span", { staticClass: "iconfont icon-dianzan1" }), t._v(" " + t._s(i.resource.count.count_like) + " ")])])]) })), 1) : s("div", { staticClass: "likeTips" }, [t._v("用户还没有喜欢的作品~")])]) : t._e(), s("div", { directives: [{ name: "show", rawName: "v-show", value: 3 == t.navIndex, expression: "navIndex == 3" }], staticClass: "info" }, [s("div", { staticClass: "basicInfo" }, [s("h3", [t._v("基本资料")]), s("div", { staticClass: "text" }, [s("div", [s("p", { staticClass: "left" }, [t._v("性别")]), s("p", { staticClass: "right" }, [t._v(t._s(1 == t.userInfo.sex ? "男" : "女"))])]), s("div", [s("p", { staticClass: "left" }, [t._v("年龄")]), s("p", { staticClass: "right" }, [t._v(t._s(t._f("getAge")(t.userInfo.birthday)))])]), t.userInfo.location ? s("div", [s("p", { staticClass: "left" }, [t._v("所在地区")]), t.userInfo.location.province || t.userInfo.location.country || t.userInfo.location.city ? s("p", { staticClass: "right" }, [t.userInfo.location.province ? s("span", [t._v(t._s(t.userInfo.location.province.name) + " ")]) : t._e(), t.userInfo.location.country ? s("span", [t._v(t._s(t.userInfo.location.country.name) + " ")]) : t._e(), t.userInfo.location.city ? s("span", [t._v(t._s(t.userInfo.location.city.name))]) : t._e()]) : s("p", { staticClass: "right" }, [t._v("未知")])]) : t._e(), s("div", [s("p", { staticClass: "left" }, [t._v("简介")]), s("p", { staticClass: "right" }, [t._v(" " + t._s(t.userInfo.about) + " ")])])])]), s("div", { staticClass: "basicInfo" }, [s("h3", [t._v("教育背景")]), s("div", { staticClass: "text" }, [s("div", [s("p", { staticClass: "left" }, [t._v("学校")]), s("p", { staticClass: "right" }, [t._v(t._s(t.userInfo.graduation))])])])]), t.userInfo.occupation || t.userInfo.entry_year || t.userInfo.verify_description ? s("div", { staticClass: "basicInfo" }, [s("h3", [t._v("认证信息")]), s("div", { staticClass: "text" }, [t.userInfo.occupation ? s("div", [s("p", { staticClass: "left" }, [t._v("认证身份")]), s("p", { staticClass: "right" }, [t._v(t._s(t.userInfo.occupation))])]) : t._e(), t.userInfo.entry_year ? s("div", [s("p", { staticClass: "left" }, [t._v("入行年份")]), s("p", { staticClass: "right" }, [t._v(t._s(t.userInfo.entry_year))])]) : t._e(), t.userInfo.verify_description ? s("div", [s("p", { staticClass: "left" }, [t._v("认证描述")]), s("p", { staticClass: "right" }, [t._v(t._s(t.userInfo.verify_description))])]) : t._e()])]) : t._e()])]) : s("div", { staticClass: "loadingView" }, [s("div", { staticClass: "loading" }), s("van-loading", { attrs: { type: "spinner", size: "20", vertical: "" } })], 1), s("van-share-sheet", { attrs: { title: "立即分享给好友", options: t.options }, model: { value: t.showShare, callback: function (s) { t.showShare = s }, expression: "showShare" } })], 1) }, a = [], n = e(3119), o = { data() { return { scrollChange: !1, userInfo: null, menuShow: !1, navIndex: 0, articlesPage: 1, articlesOrder: ["默认排序", "热门排序", "最新上传"], orderIndex: 0, articlesList: [], loading: !1, finished: !1, current: 0, active: 0, durationTime: 1, currentTime: 0, lineWidth: "0", videoLoading: !0, likeList: null, showShare: !1, options: [[{ name: "微信", icon: "wechat" }, { name: "朋友圈", icon: "wechat-moments" }, { name: "微博", icon: "weibo" }, { name: "QQ", icon: "qq" }], [{ name: "复制链接", icon: "link" }, { name: "分享海报", icon: "poster" }, { name: "二维码", icon: "qrcode" }, { name: "小程序码", icon: "weapp-qrcode" }]] } }, methods: { onChange(t) { this.current = t }, oncanplayFun() { this.durationTime = this.$refs.video.duration }, ontimeupdateFun() { this.currentTime = this.$refs.video.currentTime, this.lineWidth = this.currentTime / this.durationTime * 100 + "%" }, getUserLikeFun() { 2 != this.navIndex && (this.navIndex = 2, (0, n.qE)(this.$route.query.id).then((t => { this.likeList = t.data.list }))) }, getUserPageFun() { let t = this.$route.query.id; (0, n.HF)(t).then((t => { this.userInfo = t.data })) }, onLoad() { let t = this.$route.query.id, s = ""; 1 == this.orderIndex ? s = "view" : 2 == this.orderIndex && (s = "new"), (0, n.wR)(t, { page: this.articlesPage, order: s }).then((t => { let s = t.data.list; if (this.articlesPage > 1) for (let e = 0; e < s.length; e++)this.articlesList.push(s[e]); else this.articlesList = s; this.loading = !1, this.articlesList.length >= t.data.total && (this.finished = !0), this.articlesPage += 1 })) }, orderChange(t) { t != this.orderIndex && (this.orderIndex = t, this.articlesList = [], this.articlesPage = 1, this.onLoad()) }, stickyBgChange(t) { t.scrollTop > 82 ? (this.$refs.topNav.style.background = "#fff", this.$refs.topNav.style.color = "#000", this.scrollChange = !0) : (this.$refs.topNav.style.background = "transparent", this.$refs.topNav.style.color = "#fff", this.scrollChange = !1) }, stopPrev(t) { t.preventDefault(), t.stopPropagation() }, showMenu() { this.menuShow ? (this.menuShow = !1, document.body.removeEventListener("touchmove", this.stopPrev, { passive: !1 }), document.body.removeEventListener("mousewheel", this.stopPrev, { passive: !1 })) : (this.menuShow = !0, document.body.addEventListener("touchmove", this.stopPrev, { passive: !1 }), document.body.addEventListener("mousewheel", this.stopPrev, { passive: !1 })) }, goPrev() { this.$router.go(-1) } }, created() { this.getUserPageFun() }, mounted() { }, filters: { getAge(t) { if ("" == t) return "未知"; let s = t.slice(0, 4), e = (new Date).getFullYear(); return e - s }, CountHandle(t) { if (t < 1e4) return t; let s = t > 1e4 ? t / 1e4 : t; return s.toFixed(1) + "w" }, playerTime(t) { let s = parseInt(t / 60), e = parseInt(t % 60); return 0 == s && 0 == e ? "00'00''" : (s < 10 ? "0" + s : s) + "'" + (e < 10 ? "0" + e : e) + "''" }, changeTimeFormat(t) { var s, e = new Date(t), i = e.getFullYear(), a = e.getMonth() + 1, n = e.getDate(), o = e.getTime(), r = new Date, c = r.getTime(), l = 0; return l = c - o, s = l > 1296e6 && i === r.getFullYear() ? a + "-" + n : i + "-" + a + "-" + n, s } } }, r = o, c = e(2349), l = (0, c.Z)(r, i, a, !1, null, null, null), u = l.exports } }]);
//# sourceMappingURL=66.6aee9f50.js.map