"use strict";(self["webpackChunkjianyi"]=self["webpackChunkjianyi"]||[]).push([[894],{2368:function(t,e,n){n.d(e,{$w:function(){return a},Kk:function(){return i},YB:function(){return o}});var s=n(4040);function i(){return(0,s.Z)({url:"/notes",method:"get"})}function a(t){return(0,s.Z)({url:"/note/"+t})}function o(t){return(0,s.Z)({url:"note/"+t+"/comment"})}},3894:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",[t.noteInfo&&t.noteComments?e("div",{staticClass:"notedetail"},[e("van-sticky",[e("div",{staticClass:"top"},[e("div",{staticClass:"left"},[e("span",{staticClass:"iconfont icon-xiangzuojiantou",on:{click:t.goPrev}}),e("router-link",{staticClass:"img",attrs:{tag:"div",to:"/userinfo?id="+t.noteInfo.user.id}},[e("img",{attrs:{src:t.noteInfo.user.avatar,alt:""}})]),e("router-link",{attrs:{tag:"p",to:"/userinfo?id="+t.noteInfo.user.id}},[t._v(t._s(t.noteInfo.user.username))])],1),e("div",{staticClass:"right"},[e("div",{staticClass:"follow"},[t._v("+ 关注")]),e("span",{staticClass:"iconfont icon-fenxiang",on:{click:function(e){t.showShare=!0}}})])])]),e("div",{staticClass:"noteInfo"},[e("div",{staticClass:"pics"},t._l(t.noteInfo.images,(function(t,n){return e("div",{key:n,staticClass:"pic"},[e("img",{attrs:{src:t,alt:""}})])})),0),e("h3",{staticClass:"title"},[t._v(t._s(t.noteInfo.title))]),e("div",{staticClass:"contentText"},[e("p",{staticClass:"content"},[t._v(t._s(t.noteInfo.content))])]),0!=t.noteInfo.article.id?e("router-link",{staticClass:"videoView",attrs:{tag:"div",to:"/videoplay?id="+t.noteInfo.article.id}},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.noteInfo.article.cover,alt:""}})]),e("div",{staticClass:"text"},[e("p",{staticClass:"title"},[t._v(t._s(t.noteInfo.article.title))]),e("p",{staticClass:"name"},[t._v("@"+t._s(t.noteInfo.article.author.userinfo.username))])])]):t._e(),e("p",{staticClass:"time"},[t._v(t._s(t._f("changeTimeFormat")(1e3*t.noteInfo.addtime)))])],1),e("div",{staticClass:"noteComment"},[e("h3",{staticClass:"title"},[t._v("共 "+t._s(t.noteCommentsTotal)+" 条评论")]),t._m(0)]),e("ul",{staticClass:"commentInfo"},t._l(t.noteComments,(function(n){return e("li",{key:n.id},[e("router-link",{staticClass:"img",attrs:{tag:"div",to:"/userinfo?id="+n.userId}},[e("img",{attrs:{src:n.userDetail.avatar_small,alt:""}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"commentMsg"},[e("router-link",{staticClass:"username",attrs:{tag:"div",to:"/userinfo?id="+n.userId}},[t._v(t._s(n.userDetail.nickname))]),e("p",{staticClass:"content"},[t._v(" "+t._s(n.contentText)+" "),e("span",[t._v(t._s(t._f("changeTimeFormat")(n.createTimeUnix)))])]),n.parent?e("div",{staticClass:"commentParent"},[e("div",{staticClass:"commentParentImg"},[e("img",{attrs:{src:n.parent.userDetail.avatar_small,alt:""}})]),e("div",{staticClass:"commentParentText"},[e("p",{staticClass:"username"},[t._v(t._s(n.parent.userDetail.nickname))]),e("p",{staticClass:"content"},[t._v(" "+t._s(n.parent.contentText)+" "),e("span",[t._v(t._s(t._f("changeTimeFormat")(n.parent.createTimeUnix)))])])])]):t._e()],1),e("span",{staticClass:"iconfont icon-dianzan1"})])],1)})),0),e("div",{staticClass:"noMore"},[t._v("暂时没有更多了")]),e("div",{staticClass:"commentNull"}),e("div",{staticClass:"comment"},[e("input",{attrs:{type:"text",placeholder:"说点什么吧~"}}),e("div",{staticClass:"zan"},[e("span",{class:["iconfont","icon-dianzan1",{likeactive:t.noteInfo.isliked}]}),t._v(" "+t._s(t.noteInfo.count.count_liked)+" ")]),e("div",{staticClass:"pinglun"},[e("span",{staticClass:"iconfont icon-pinglun1"}),t._v(t._s(t.noteCommentsTotal)+" ")])]),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1):e("div",{staticClass:"loadingView"},[e("div",{staticClass:"loading"}),e("van-loading",{attrs:{type:"spinner",size:"20",vertical:""}})],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"yourCommentView"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:"https://cs.xinpianchang.com/passport/default.jpg",alt:""}})]),e("div",{staticClass:"yourCommentBox"},[t._v("说说你的看法吧~")])])}],a=n(2368),o={data(){return{noteInfo:null,noteComments:null,noteCommentsTotal:0,showShare:!1,loginPhone:"",options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]]}},methods:{goPrev(){this.$router.go(-1)},getNoteDetailFun(){let t=localStorage.getItem("userlist"),e=[];if(!t)return;e=JSON.parse(t);let n=e.findIndex((t=>"login"==t.type));if(-1==n)return;this.loginPhone=e[n].phone;let s=this.$route.query.id;(0,a.$w)(s).then((t=>{this.noteInfo=t.data;let e=localStorage.getItem("notelikeList");if(!e)return;let n=JSON.parse(e),s=n.findIndex((t=>t.phone==this.loginPhone));if(-1==s)return;let i=n[s].noteIds,a=i.findIndex((t=>t==this.noteInfo.id));-1!=a&&(this.noteInfo.isliked=!0,this.noteInfo.count.count_liked+=1)}))},getNoteCommentFun(){let t=this.$route.query.id;(0,a.YB)(t).then((t=>{this.noteComments=t.data,this.noteCommentsTotal=t.total}))}},filters:{changeTimeFormat(t){var e,n=new Date(t),s=n.getFullYear(),i=n.getMonth()+1,a=n.getDate(),o=n.getHours(),r=n.getMinutes(),l=n.getTime(),c=new Date,u=c.getTime(),m=0;return m=u-l,e=m<=6e4?"刚刚":6e4<m&&m<=36e5?Math.round(m/6e4)+"分钟前":36e5<m&&m<=864e5?Math.round(m/36e5)+"小时前":864e5<m&&m<=1296e6?Math.round(m/864e5)+"天前":m>1296e6&&s===c.getFullYear()?i+"-"+a+" "+o+":"+r:s+"-"+i+"-"+a+" "+o+":"+r,e}},created(){this.getNoteDetailFun(),this.getNoteCommentFun()}},r=o,l=n(2349),c=(0,l.Z)(r,s,i,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=894.92da93df.js.map